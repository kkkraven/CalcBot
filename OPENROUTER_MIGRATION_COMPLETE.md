# ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ OpenRouter –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ!

## üîÑ –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### 1. **–£–¥–∞–ª–µ–Ω Gemini API**
- ‚ùå –£–¥–∞–ª–µ–Ω —Å–µ–∫—Ä–µ—Ç `GEMINI_API_KEY` –∏–∑ Cloudflare
- ‚ùå –£–¥–∞–ª–µ–Ω—ã –≤—Å–µ —É–ø–æ–º–∏–Ω–∞–Ω–∏—è Gemini –∏–∑ –∫–æ–¥–∞
- ‚ùå –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –≤—Å–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –∏ —Ñ—É–Ω–∫—Ü–∏–∏

### 2. **–ù–∞—Å—Ç—Ä–æ–µ–Ω OpenRouter API**
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω —Å–µ–∫—Ä–µ—Ç `OPENROUTER_API_KEY` –≤ Cloudflare
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω Worker –¥–ª—è —Ä–∞–±–æ—Ç—ã —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ OpenRouter
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –≤—Å–µ API –≤—ã–∑–æ–≤—ã

### 3. **–û–±–Ω–æ–≤–ª–µ–Ω—ã —Ñ–∞–π–ª—ã**

#### `workers/api-proxy.js`:
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω health endpoint (`/health`)
- ‚úÖ –£–±—Ä–∞–Ω—ã —É–ø–æ–º–∏–Ω–∞–Ω–∏—è Gemini
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –≤—ã–±–æ—Ä–∞ –º–æ–¥–µ–ª–µ–π
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∏ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö

#### `services/openRouterService.ts` (–ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω –∏–∑ `geminiService.ts`):
- ‚úÖ –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω—ã –≤—Å–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã (`GeminiSDKConfig` ‚Üí `OpenRouterConfig`)
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `makeSecureOpenRouterRequest`
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ –≤—ã–∑–æ–≤—ã —Ñ—É–Ω–∫—Ü–∏–π
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –º–æ–¥–µ–ª–µ–π

#### `test-deployment.html`:
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –≤—Å–µ —Ç–µ—Å—Ç–æ–≤—ã–µ endpoints
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω —Ñ–æ—Ä–º–∞—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è OpenRouter
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (`maxOutputTokens` ‚Üí `max_tokens`)

### 4. **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –º–æ–¥–µ–ª–µ–π**
```typescript
const MODEL_CONFIG = {
  extraction: "claude-3-haiku",        // –î–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –∑–∞–¥–∞—á
  priceCorrection: "claude-3-haiku",   // –î–ª—è –∫–æ—Ä—Ä–µ–∫—Ü–∏–∏ —Ü–µ–Ω—ã
  costEstimation: "claude-3-5-sonnet", // –î–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Ä–∞—Å—á–µ—Ç–æ–≤
};
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –î–æ—Å—Ç—É–ø–Ω—ã–µ endpoints:
- **Health Check**: `GET /health` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ API
- **AI Requests**: `POST /` - –≤—Å–µ AI –∑–∞–ø—Ä–æ—Å—ã —á–µ—Ä–µ–∑ OpenRouter

### –¢–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª:
- –û—Ç–∫—Ä–æ–π—Ç–µ `test-deployment.html` –≤ –±—Ä–∞—É–∑–µ—Ä–µ
- –ü—Ä–æ–≤–µ–¥–∏—Ç–µ –≤—Å–µ —Ç–µ—Å—Ç—ã:
  - ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ API
  - ‚úÖ –¢–µ—Å—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
  - ‚úÖ –¢–µ—Å—Ç –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
  - ‚úÖ –¢–µ—Å—Ç —Ä–∞—Å—á–µ—Ç–∞ —Å—Ç–æ–∏–º–æ—Å—Ç–∏
  - ‚úÖ –¢–µ—Å—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

## üîë API –ö–ª—é—á–∏

### –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Å–µ–∫—Ä–µ—Ç—ã –≤ Cloudflare:
- ‚úÖ `CLIENT_API_KEY` - –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤
- ‚úÖ `OPENROUTER_API_KEY` - –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ OpenRouter API

### –õ–æ–∫–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:
- ‚úÖ `.env.local` - —Å–æ–¥–µ—Ä–∂–∏—Ç `VITE_CLIENT_API_KEY` –∏ `VITE_API_BASE_URL`

## üöÄ –î–µ–ø–ª–æ–π

### Cloudflare Worker:
- ‚úÖ –£—Å–ø–µ—à–Ω–æ –∑–∞–¥–µ–ø–ª–æ–µ–Ω: `https://packaging-calculator-api.46261vor.workers.dev`
- ‚úÖ Health endpoint —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –í—Å–µ API –∑–∞–ø—Ä–æ—Å—ã –ø—Ä–æ—Ö–æ–¥—è—Ç —á–µ—Ä–µ–∑ OpenRouter

## üìä –°—Ç–∞—Ç—É—Å

### ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é:
- [x] –í—Å–µ Gemini –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É–¥–∞–ª–µ–Ω—ã
- [x] OpenRouter API –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [x] Worker –æ–±–Ω–æ–≤–ª–µ–Ω –∏ –∑–∞–¥–µ–ø–ª–æ–µ–Ω
- [x] –¢–µ—Å—Ç—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã
- [x] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞

### üîó –î–æ—Å—Ç—É–ø–Ω—ã–µ URL:
- **API**: `https://packaging-calculator-api.46261vor.workers.dev`
- **Health**: `https://packaging-calculator-api.46261vor.workers.dev/health`
- **–õ–æ–∫–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä**: `http://localhost:5173`
- **–¢–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª**: `test-deployment.html`

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**:
   ```bash
   # –û—Ç–∫—Ä–æ–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª
   start test-deployment.html
   
   # –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ª–æ–∫–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä
   npm run dev
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏**:
   - –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏–∑ —Ç–µ–∫—Å—Ç–∞
   - –†–∞—Å—á–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ —É–ø–∞–∫–æ–≤–∫–∏
   - –ö–æ—Ä—Ä–µ–∫—Ü–∏—è —Ü–µ–Ω
   - –†–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π –∑–Ω–∞–Ω–∏–π

3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**:
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ Cloudflare Dashboard
   - –°–ª–µ–¥–∏—Ç–µ –∑–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Ç–æ–∫–µ–Ω–æ–≤
   - –ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–π—Ç–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

## üéâ –ú–∏–≥—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞!

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç **–ò–°–ö–õ–Æ–ß–ò–¢–ï–õ–¨–ù–û** —á–µ—Ä–µ–∑ OpenRouter API. –í—Å–µ Gemini –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É–¥–∞–ª–µ–Ω—ã, –∫–æ–¥ –æ—á–∏—â–µ–Ω –∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å OpenRouter.

**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É
